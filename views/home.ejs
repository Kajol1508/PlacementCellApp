<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('_bootstrap_meta')%>
    <title>Placement Cell App</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.min.js"></script>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
      crossorigin="anonymous"
    />
    <script
      src="https://kit.fontawesome.com/a8162db7fd.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body
    style="
      background: #d3cce3; /* fallback for old browsers */
      background: -webkit-linear-gradient(
        to top,
        #e9e4f0,
        #d3cce3
      ); /* Chrome 10-25, Safari 5.1-6 */
      background: linear-gradient(
        to top,
        #e9e4f0,
        #d3cce3
      ); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
      height: 100vh;
    "
  >
    <%- include('_header') %>
    <div class="w-75 mx-auto mt-5">
      <br />

      <div class="row">
        <div class="col-6">
          <h2>List of Students</h2>
        </div>

        <div class="col-6 d-flex justify-content-end">
          <a
            href="/students/create"
            type="button"
            class="btn btn-success align-self-center"
            ><i class="fa-solid fa-plus"></i> Add Student</a
          >
        </div>
      </div>
      <hr />
      <% if(students.length > 0) {%>
      <div class="mt-3 mb-3">
        <table class="table table-bordered table-striped table-hover">
          <thead class="thead-dark">
            <tr>
              <th scope="col">Batch</th>
              <th scope="col">Name</th>
              <th scope="col">Email</th>
              <th scope="col">Contact</th>
              <th scope="col">DSA Score</th>
              <th scope="col">WebD Score</th>
              <th scope="col">REACT Score</th>
              <th scope="col">Interview</th>
              <th scope="col" class="text-center">Action</th>
            </tr>
          </thead>

          <tbody id="myTable">
            <% for(let student of students) {%>
            <tr>
              <th scope="row"><%=student.batch%></th>
              <td><%=student.name%></td>
              <td><%=student.email%></td>
              <td><%=student.contactNumber%></td>
              <td><%=student.dsa%></td>
              <td><%=student.webd%></td>
              <td><%=student.react%></td>
              <% if(student.interviews.length) {%>
              <td>
                <% for(let company of student.interviews){%>
                <a
                  href=" "
                  id="company_name"
                  style="text-decoration: none; color: #000"
                  ><%=company.company%></a
                >
                <%}%>
              </td>
              <%}else{%>
              <td>NONE</td>
              <%}%>
              <td
                style="
                  display: flex;
                  justify-content: space-around;
                  align-items: center;
                "
              >
                <a
                  href="/students/delete/<%=student.id%>"
                  type="button"
                  class="btn btn-danger btn-sm"
                  ><i class="fa-solid fa-trash fa-xs"></i
                ></a>
              </td>
            </tr>
            <%}%>
          </tbody>
        </table>
      </div>
      <%}else{%>
      <div class="w-30 mx-auto mt-5">
        <h6>No Records Found</h6>
      </div>
      <%}%>
    </div>
    <%- include('_bootstrap_script')%>
  </body>
</html>
